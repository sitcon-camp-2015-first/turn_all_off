<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Turn all off!</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script> 
</head>
<body>
    <script>

    var board = new Array ();
    var index = new Array ();
    const r_size = 10;
    const c_size = 10;
    var num_on_bulbs = 0;
    var on_bulb_start = '<img src="on.png" id="';
    var off_bulb_start = '<img src="off.png" id="';
    var img_end = '/>';

    for (var r = 0; r < r_size; ++r) {
            board[r]= new Array();
            index[r] = new Array()
            var idx = 'row' + r;
            for( var c = 0 ; c < c_size ; ++c){
                board[r][c] = false;
                index[r][c] = new Array();
                for(var on = 0 ; on < 2 ; on++ )
                {
                    index[r][c][on] = idx + "col" + c + '_' + on;
                }
            }
        }


    function press( r , c  ){
            for(var i = r-1 ; i <= (r+1) ; i++ ){
                if( i >= 0 && i < r_size){
                    for(var j = c-1 ; j <= (c+1) ; j++ ){
                        if( j >= 0 && j < c_size ){
                            board[i][j] = !board[i][j];
                            for(var on = 0; on < 2 ; on++ )
                                $( "#" + index[i][j][on] ).toggle();
 
                            if(board[i][j]){
                                num_on_bulbs++;
                            }
                            else{
                                num_on_bulbs--;
                            }
                        }
                    }
                }
            }
        }


    $(document).ready(function(){
           
      for( var r = 0 ; r < r_size ; r++ ){

            var cur_row = "<tr>";
            for( var c = 0 ; c < c_size ; c++ ){
                $( '#' + index[r][c] ).css( "background-image" , "url(on.png)" );  
                cur_row += ( '<td>' +  
                        off_bulb_start + index[r][c][0] + '" onclick="press(' + r + ',' + c + ')"' + img_end + 
                        on_bulb_start + index[r][c][1] + '" onclick="press(' + r + ',' + c + ')"' + img_end + 
                        "</td>" );
            }
            cur_row += "</tr>";

            $("#Board").append( cur_row );

            for( var c = 0 ; c < c_size ; c++ ){
                $( "#" + index[r][c][1] ).toggle();
            }
      }
 
    });
    </script>

    <div>
        <table border="1" id="Board">
        </table>
    </div>

</body>
</html>
